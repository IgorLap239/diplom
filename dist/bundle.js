(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,l,i,s,a,c,u,d,m,p,f,y,v,b,g,h,E,S,w,x,L,q,k;q=document.querySelector(".clubs-list > p"),k=document.querySelector(".clubs-list > ul"),q.addEventListener("click",(function(){var e=getComputedStyle(k);"none"===e.display?k.style.display="block":"block"===e.display&&(k.style.display="none")})),w=document.querySelector(".popup-menu"),x=document.querySelector(".menu-button > img"),L=document.querySelector(".close-menu-btn > img"),window.addEventListener("click",(function(e){var t=e.target,n=getComputedStyle(w);"none"===n.display?t===x&&(w.style.display="flex"):"flex"===n.display&&(t===L||t.closest(".scroll"))&&(w.style.display="none")})),function(){var e=document.querySelector(".menu-button, .hidden-large");function t(e){window.onscroll=function(){+window.innerWidth<768?window.scrollY>e.offsetTop?"fixed"!==e.style.position&&(e.style.position="fixed",e.style.top="0"):"fixed"===e.style.position&&(e.style.position="",e.style.top=""):(e.style.position="",e.style.top="")}}window.addEventListener("resize",(function(){t(e.closest(".top-menu"))})),t(e.closest(".top-menu"))}(),(S=document.getElementById("totop")).style.display="none",window.addEventListener("scroll",(function(){window.scrollY>600?S.style.display="block":window.scrollY<500&&(S.style.display="none")})),f=document.getElementById("gift"),y=document.getElementById("free_visit_form"),v=document.getElementById("callback_form"),b=document.querySelector(".open-popup"),g=document.querySelector(".callback-btn"),h=document.querySelector(".fixed-gift > img"),E=document.querySelector(".fixed-gift"),window.addEventListener("click",(function(e){var t,n=(t=e.target)===h?(E.style.display="none",f.style.display="block",f.querySelector(".form-wrapper")):t===b?(y.style.display="block",y.querySelector(".form-wrapper")):t===g?(v.style.display="block",v.querySelector(".form-wrapper")):0;if(0!==n&&document.documentElement.clientWidth>768)var o=Date.now(),r=setInterval((function(){var e=Date.now()-o;e>=1010?clearInterval(r):function(e){n.style.top=e/10+"px"}(e)}),20)})),window.addEventListener("click",(function(e){var t=e.target,n=t.closest(".popup");n&&(t.classList.contains("close-btn")||t.classList.contains("close_icon")?n.style.display="none":(t=t.closest(".form-wrapper"))||(n.style.display="none"))})),d=document.querySelector(".main-slider").querySelectorAll(".slide"),m=0,p=function(){d[m].style.display="none",++m>=d.length&&(m=0),d[m].style.display="flex",m>=d.length&&(m=0),m<0&&(m=d.length-1)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;setInterval(p,e)}(2e3),n=document.getElementById("form1"),o=document.getElementById("form2"),r=document.getElementById("banner-form"),l=document.getElementById("card_order"),i=document.getElementById("footer_form"),s=function(e){var t=e.target;t.matches('input[name="name"]')?t.value=t.value.replace(/[^А-Яа-я ]/g,""):t.matches('input[name="phone"]')&&(t.value=t.value.replace(/[^0-9\+]/g,""))},a=function(e){var t=e.target,n=t.closest("form");t.value=t.value.replace(/ +/g," ").trim(),t.value=t.value.replace(/-+/g,"-"),t.value=t.value.replace(/^-*/g,""),t.value=t.value.replace(/-*$/g,""),t.matches('input[name="name"]')&&(t.value.length<2?(c(t),n.querySelector("button").setAttribute("disabled","disabled")):(u(t),n.querySelector("button").removeAttribute("disabled"),n.querySelector("button").style.display="inline-block",t.value=t.value[0].toUpperCase()+t.value.substr(1).toLowerCase())),t.matches('input[name="phone"]')&&("+"!==t.value[0]&&7===t.value.length||"+"!==t.value[0]&&11===t.value.length||"+"===t.value[0]&&12===t.value.length?(u(t),n.querySelector("button").removeAttribute("disabled"),n.querySelector("button").style.display="inline-block"):(c(t),n.querySelector("button").setAttribute("disabled","disabled"))),n.querySelectorAll("input").forEach((function(e){e.classList.contains("error")&&n.querySelector("button").setAttribute("disabled","disabled")}))},c=function(e){if(e.classList.remove("success"),e.classList.add("error"),!e.nextElementSibling||!e.nextElementSibling.classList.contains("validator-error")){var t=document.createElement("div");e.matches('input[name="name"]')?t.textContent="Имя должно состоять минимум из 2 символов":e.matches('input[name="phone"]')||e.matches('input[placeholder="Ваш номер телефона"]')?t.textContent="Это не номер телефона":e.matches('input[type="checkbox"]')&&(t.textContent="Требуется согласие"),t.classList.add("validator-error"),e.insertAdjacentElement("afterend",t)}},u=function(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()},(t=document.createElement("style")).textContent="\n        input.success {\n          border: 2px solid green !important;\n        }\n        input.error {\n          border: 2px solid red  !important;\n        }\n\n        .validator-error {\n          font-size: 14px;\n          font-weight: bold;\n          padding-top: 10px;\n          font-family: sans-serif;\n          color: red;\n        }\n        ",document.head.appendChild(t),n.addEventListener("input",s),n.addEventListener("focusout",a),o.addEventListener("input",s),o.addEventListener("focusout",a),r.addEventListener("input",s),r.addEventListener("focusout",a),l.addEventListener("input",s),l.addEventListener("focusout",a),i.addEventListener("input",s),i.addEventListener("focusout",a),function(){var t=document.getElementById("thanks"),n=document.getElementById("form1"),o=document.getElementById("form2"),r=document.getElementById("banner-form"),l=document.getElementById("card_order"),i=document.getElementById("footer_form"),s=document.createElement("div");s.style.cssText="font-size: 2rem;\n      color: #ffffff;";var a=function(n){n.preventDefault();var o=n.target;if(o===l||o===i){var a=o.querySelectorAll('input[type="radio"]'),u=0;if(a.forEach((function(e){!1===e.checked&&u++})),u===a.length){var m=document.createElement("div");return m.textContent="Выберите клуб",m.classList.add("validator-error"),m.style.paddingRight="30px",m.style.paddingBottom="5px",void o.querySelector("button").insertAdjacentElement("beforebegin",m)}o.querySelector("button").previousElementSibling&&o.querySelector("button").previousElementSibling.classList.contains("validator-error")&&o.querySelector("button").previousElementSibling.remove()}var p=o.querySelector('input[type="checkbox"]');if(p){var f=p.closest("p");if(!p.checked){var y=document.createElement("div");if(y.textContent="Требуется согласие",y.classList.add("validator-error"),f.nextElementSibling&&f.nextElementSibling.classList.contains("validator-error"))return;return void f.insertAdjacentElement("afterend",y)}f.nextElementSibling&&f.nextElementSibling.classList.contains("validator-error")&&f.nextElementSibling.remove()}o.append(s);var v,b={},g=function(t,n){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){o&&(t=o);var r=0,l=function(){};return{s:l,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,a=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var e=o.next();return s=e.done,e},e:function(e){a=!0,i=e},f:function(){try{s||null==o.return||o.return()}finally{if(a)throw i}}}}(new FormData(o).entries());try{for(g.s();!(v=g.n()).done;){var h=v.value;"form_name"!==h[0]&&(b[h[0]]=h[1])}}catch(e){g.e(e)}finally{g.f()}c(b).then((function(e){if(200!==e.status)throw new Error("status network not 200");o===r||o===l||o===i?(s.remove(),t.style.display="block",d(o)):o.innerHTML='<div class="form-content">\n                    <h4>Спасибо!</h4>\n                    <p style=\'font-size: 20px;\n                    width: 90%;\n                    color: #fff;\n                    font-weight: 500;\n                    margin-top: 30px\'>Ваша заявка отправлена. <br> Мы свяжемся с вами в ближайшее время.</p>\n                    <button class="btn close-btn">OK</button>\n                    </div>',setTimeout((function(){document.querySelectorAll(".popup").forEach((function(e){"block"===e.style.display&&(e.style.display="none")}))}),5e3)})).catch((function(){o===r||o===l||o===i?(s.remove(),t.innerHTML='<div class="form-content">\n                    <h4>Упс!</h4>\n                    <p style=\'font-size: 20px;\n                    width: 90%;\n                    color: #fff;\n                    font-weight: 500;\n                    margin-top: 30px\'>В процессе отправки <br> произошла ошибка</p>\n                    <button class="btn close-btn">OK</button>\n                    </div>',t.style.display="block",d(o)):o.innerHTML='<div class="form-content">\n                    <h4>Упс!</h4>\n                    <p style=\'font-size: 20px;\n                    width: 90%;\n                    color: #fff;\n                    font-weight: 500;\n                    margin-top: 30px\'>В процессе отправки <br> произошла ошибка</p>\n                    <button class="btn close-btn">OK</button>\n                    </div>',setTimeout((function(){document.querySelectorAll(".popup").forEach((function(e){"block"===e.style.display&&(e.style.display="none")}))}),5e3)}))},c=function(e){return s.textContent="",s.insertAdjacentHTML("afterBegin",'\n            <progress id="elem"></progress>\n            '),document.getElementById("elem").style.cssText="\n                width: 50px;\n            ",requestAnimationFrame(u),fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},u=function e(){var t=performance.now()/1e3;t>1&&(t=1),t<1&&requestAnimationFrame(e)},d=function(e){e.querySelectorAll("input").forEach((function(e){e.value="",(e.matches('input[type="radio"]')||e.matches('input[type="checkbox"]'))&&(e.checked=!1)}))};n.addEventListener("submit",a),o.addEventListener("submit",a),r.addEventListener("submit",a),l.addEventListener("submit",a),i.addEventListener("submit",a)}()})();